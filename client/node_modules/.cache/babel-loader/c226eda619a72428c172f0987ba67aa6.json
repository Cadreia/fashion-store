{"ast":null,"code":"import _regeneratorRuntime from \"/home/audrey/Documents/REACT/PORTFOLIO/fashion-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/home/audrey/Documents/REACT/PORTFOLIO/fashion-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/home/audrey/Documents/REACT/PORTFOLIO/fashion-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/audrey/Documents/REACT/PORTFOLIO/fashion-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/audrey/Documents/REACT/PORTFOLIO/fashion-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/audrey/Documents/REACT/PORTFOLIO/fashion-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/audrey/Documents/REACT/PORTFOLIO/fashion-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/audrey/Documents/REACT/PORTFOLIO/fashion-store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/audrey/Documents/REACT/PORTFOLIO/fashion-store/src/App.js\";\nimport React, { useState, useEffect, Component } from \"react\";\nimport \"./App.css\";\nimport HomePage from \"./pages/home/homepage.component\";\nimport { Routes, Route, Navigate } from \"react-router-dom\";\nimport ShopPage from \"./pages/shop/shoppage.component\";\nimport Header from \"./components/header/header.component\";\nimport Auth from \"./pages/auth/auth.component\";\nimport { auth, createUserProfileDocument } from \"./firebase/firebase.utils\";\nimport { onAuthStateChanged, signOut } from \"firebase/auth\";\nimport { onSnapshot } from \"firebase/firestore\";\nimport { connect } from \"react-redux\";\nimport { setCurrentUser as _setCurrentUser } from \"./redux/user/user.actions\";\nimport { createStructuredSelector } from \"reselect\";\nimport { selectCurrentUser } from \"./redux/user/user.selector\";\nimport CheckoutPage from \"./pages/checkout/checkout.component\";\nimport CollectionPage from \"./pages/collection/collection.component\";\nimport CollectionsOverview from \"./components/collections-overview/collections-overview.component\";\n\nvar App = /*#__PURE__*/function (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.unSubscribeFromAuth = null;\n\n    _this.logUserOut = function () {\n      signOut(auth).then(function () {\n        // Sign-out successful.\n        _this.setState({\n          currentUser: null\n        });\n      }).catch(function (error) {\n        // An error happened.\n        console.log(error);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var setCurrentUser = this.props.setCurrentUser;\n      this.unSubscribeFromAuth = onAuthStateChanged(auth, /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(user) {\n          var userDocRef;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  if (!user) {\n                    _context.next = 7;\n                    break;\n                  }\n\n                  _context.next = 3;\n                  return createUserProfileDocument(user);\n\n                case 3:\n                  userDocRef = _context.sent;\n                  // assign current user state the value of the resulting snapshop\n                  onSnapshot(userDocRef, function (doc) {\n                    setCurrentUser(_objectSpread({\n                      id: doc.id\n                    }, doc.data()));\n                  });\n                  _context.next = 7;\n                  break;\n\n                case 7:\n                  setCurrentUser(user);\n\n                case 8:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unSubscribeFromAuth();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Header, {\n        logUserOut: this.logUserOut,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(Routes, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        element: /*#__PURE__*/React.createElement(HomePage, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 42\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/shop\",\n        element: /*#__PURE__*/React.createElement(ShopPage, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 40\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Route, {\n        index: true,\n        element: /*#__PURE__*/React.createElement(CollectionsOverview, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 35\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \":collectionId\",\n        element: /*#__PURE__*/React.createElement(CollectionPage, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 56\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/checkout\",\n        element: /*#__PURE__*/React.createElement(CheckoutPage, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 50\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/auth\",\n        element: this.props.currentUser ? /*#__PURE__*/React.createElement(Navigate, {\n          replace: true,\n          to: \"/\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 40\n          }\n        }) : /*#__PURE__*/React.createElement(Auth, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 70\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nvar mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser\n});\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setCurrentUser: function setCurrentUser(user) {\n      return dispatch(_setCurrentUser(user));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["/home/audrey/Documents/REACT/PORTFOLIO/fashion-store/src/App.js"],"names":["React","useState","useEffect","Component","HomePage","Routes","Route","Navigate","ShopPage","Header","Auth","auth","createUserProfileDocument","onAuthStateChanged","signOut","onSnapshot","connect","setCurrentUser","createStructuredSelector","selectCurrentUser","CheckoutPage","CollectionPage","CollectionsOverview","App","unSubscribeFromAuth","logUserOut","then","setState","currentUser","catch","error","console","log","props","user","userDocRef","doc","id","data","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Component } from \"react\";\nimport \"./App.css\";\nimport HomePage from \"./pages/home/homepage.component\";\nimport { Routes, Route, Navigate } from \"react-router-dom\";\nimport ShopPage from \"./pages/shop/shoppage.component\";\nimport Header from \"./components/header/header.component\";\nimport Auth from \"./pages/auth/auth.component\";\nimport { auth, createUserProfileDocument } from \"./firebase/firebase.utils\";\nimport { onAuthStateChanged, signOut } from \"firebase/auth\";\nimport { onSnapshot } from \"firebase/firestore\";\nimport { connect } from \"react-redux\";\nimport { setCurrentUser } from \"./redux/user/user.actions\";\nimport { createStructuredSelector } from \"reselect\";\nimport { selectCurrentUser } from \"./redux/user/user.selector\";\nimport CheckoutPage from \"./pages/checkout/checkout.component\";\nimport CollectionPage from \"./pages/collection/collection.component\";\nimport CollectionsOverview from \"./components/collections-overview/collections-overview.component\";\n\nclass App extends Component {\n  unSubscribeFromAuth = null;\n\n  componentDidMount() {\n    const { setCurrentUser } = this.props;\n    this.unSubscribeFromAuth = onAuthStateChanged(auth, async (user) => {\n      if (user) {\n        // User is signed in\n        const userDocRef = await createUserProfileDocument(user);\n\n        // assign current user state the value of the resulting snapshop\n        onSnapshot(userDocRef, (doc) => {\n          setCurrentUser({\n            id: doc.id,\n            ...doc.data(),\n          });\n        });\n      } else {\n        // No user is signed in.\n      }\n      setCurrentUser(user);\n    });\n  }\n\n  componentWillUnmount() {\n    this.unSubscribeFromAuth();\n  }\n\n  logUserOut = () => {\n    signOut(auth)\n      .then(() => {\n        // Sign-out successful.\n        this.setState({ currentUser: null });\n      })\n      .catch((error) => {\n        // An error happened.\n        console.log(error);\n      });\n  };\n\n  render() {\n    return (\n      <div>\n        <Header logUserOut={this.logUserOut} />\n        <Routes>\n          <Route exact path=\"/\" element={<HomePage />} />\n          <Route path=\"/shop\" element={<ShopPage />}>\n            <Route index element={<CollectionsOverview />} />\n            <Route exact path=\":collectionId\" element={<CollectionPage />} />\n          </Route>\n          <Route exact path=\"/checkout\" element={<CheckoutPage />} />\n          <Route\n            exact\n            path=\"/auth\"\n            element={\n              this.props.currentUser ? <Navigate replace to=\"/\" /> : <Auth />\n            }\n          />\n          {/* <Route exact path=\"/login\" element={<Login/>}/>\n            <Route exact path=\"/recovery-password\" element={<RecoveryPassword/>}/>\n            <Route path=\"*\" element={<NotFound/>}/> */}\n        </Routes>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  setCurrentUser: (user) => dispatch(setCurrentUser(user)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n"]},"metadata":{},"sourceType":"module"}